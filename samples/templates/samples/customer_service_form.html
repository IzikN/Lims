{% extends "base.html" %}
{% block content %}
<!-- Include Bootstrap CDN -->
<form method="post" enctype="multipart/form-data" class="container mt-4">
    {% csrf_token %}

    <div class="form-group">
        <label>Client Email:</label>
        <input type="email" name="client_email" class="form-control" required>
    </div>

    <div class="form-group">
        <label>Company Address:</label>
        <input type="text" name="client_company_address" class="form-control" required>
    </div>

    <div class="form-group">
        <label>Sample Name:</label>
        <input type="text" name="name" class="form-control" required>
    </div>

    <div class="form-group">
        <label>Sample Type:</label>
        <select name="sample_type" class="form-control">
            <option value="food">Food</option>
            <option value="feed">Feed</option>
            <option value="water">Water</option>
            <option value="ingredient">Raw Material</option>
            <option value="ingredient">Other</option>
        </select>
    </div>

    <div class="form-group">
        <label>Description:</label>
        <textarea name="description" class="form-control"></textarea>
    </div>

    <div class="form-group">
        <label>Number of Samples:</label>
        <input type="number" name="num_samples" id="num_samples" class="form-control" required min="1">
    </div>

    <div id="weights-container" class="form-group"></div>

    <div class="form-group">
        <label>Analysis Type:</label>
        <select name="analysis_type" class="form-control">
            <option value="proximate">Proximate</option>
            <option value="ge">Gross Energy</option>
            <option value="vitamin">Vitamin</option>
        </select>
    </div>

    <div class="form-group">
        <label>Charge (â‚¦):</label>
        <input type="number" name="charges" class="form-control" required>
    </div>

    <div class="form-check">
        <input type="checkbox" name="is_urgent" class="form-check-input" id="urgent">
        <label class="form-check-label" for="urgent">Mark as Urgent</label>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Submit Samples</button>
</form>

<script>
    document.getElementById('num_samples').addEventListener('input', function () {
        let count = parseInt(this.value);
        let container = document.getElementById('weights-container');
        container.innerHTML = '';

        for (let i = 0; i < count; i++) {
            container.innerHTML += `
                <label>Weight for Sample ${i + 1}</label>
                <input type="text" name="weights[]" class="form-control mb-2" required>
            `;
        }
    });
</script>

{% endblock %}
